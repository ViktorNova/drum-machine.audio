<!DOCTYPE html>
<html>
    <head>
		<meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Drum machine</title>
        <link rel="icon" type="image/x-icon" href="{{ asset('favicon.ico') }}" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
        <!-- Optional Bootstrap theme -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
		<link rel="stylesheet" href="{{ asset('bundles/app/css/main.css') }}">
        {% block stylesheets %}{% endblock %}
    </head>
    <body>

    	{% include "header.html.twig" %}
    	
    	<section class="container">
	        {% block body %}{% endblock %}
	    </section>
	    
	    {% include "footer.html.twig" %}
        
        <script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
        <script src="/lib/jquery.knob.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
        <script type="text/javascript">

        	window.drumMachine = {
				timerWorkerFilename: "{{ asset('bundles/app/js/timer-worker.js') }}",
				sounds: {{ sounds|json_encode|raw }},
				patterns: {{ patterns|json_encode|raw }},
				format: (new Audio().canPlayType('audio/ogg') !== '' ? 'ogg' : 'mp3'),
				scheduleAheadTime:0.1,
				audioContext: new AudioContext(),
				loadedSounds: [],
				tempo: 120,
				currentTickIndex: 0,
				nextTickTime: 0.0,
				currentPattern: null,
				schedulerTimeInterval: 25, // Scheduler's time interval (in milliseconds)
				masterVolume: 100,
				tempo: 120,
				isPlaying: false,
				timerWorker: null
        	}
        	var pageActions = {{ pageActions|json_encode|raw }};

        </script>
        {% javascripts
        	'@AppBundle/Resources/public/js/common.js'
   			'@AppBundle/Resources/public/js/pattern-editor.js'
        	'@AppBundle/Resources/public/js/audio.js'
        %}
    		<script type="text/javascript" src="{{ asset_url }}"></script>
		{% endjavascripts %}
        {% block javascripts %}{% endblock %}

    </body>
</html>
